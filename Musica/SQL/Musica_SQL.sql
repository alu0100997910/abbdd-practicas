-- MySQL Script generated by MySQL Workbench
-- Mon Feb  4 00:00:20 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Musico`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Musico` (
  `dni` VARCHAR(9) NOT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Nacionalidad` VARCHAR(45) NULL,
  `Fecha de nacimiento` DATE NULL,
  PRIMARY KEY (`dni`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Grupo` (
  `Nombre` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`Nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Instrumento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Instrumento` (
  `Nombre` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`Nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Canciones`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Canciones` (
  `Nombre` VARCHAR(20) NOT NULL,
  `Duracion` FLOAT NULL,
  `Publicacion` DATE NULL,
  `Genero` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Discografica`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Discografica` (
  `Codigo` INT NOT NULL,
  `Nombre` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`Codigo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Productora`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Productora` (
  `Codigo` INT NOT NULL,
  `Nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Codigo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Album`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Album` (
  `Nombre` VARCHAR(30) NOT NULL,
  `Publicacion` DATE NULL,
  `Tipo` SET('EP', 'Sencillo', 'Albumes') NOT NULL,
  `Genero` VARCHAR(45) NOT NULL,
  `Cantidad de canciones` INT NOT NULL,
  `Formato` SET('Digital', 'Fisico') NULL,
  PRIMARY KEY (`Nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Pertenece_Mus_Gru`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Pertenece_Mus_Gru` (
  `dni_m` VARCHAR(9) NOT NULL,
  `Nombre_g` VARCHAR(45) NOT NULL,
  `Comienzo` DATE NOT NULL,
  `Fin` VARCHAR(45) NULL,
  PRIMARY KEY (`dni_m`, `Nombre_g`),
  INDEX `nombre_g_idx` (`Nombre_g` ASC) VISIBLE,
  CONSTRAINT `dni_m`
    FOREIGN KEY (`dni_m`)
    REFERENCES `mydb`.`Musico` (`dni`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `Nombre_g`
    FOREIGN KEY (`Nombre_g`)
    REFERENCES `mydb`.`Grupo` (`Nombre`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tocan_Musico_Instrumento`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tocan_Musico_Instrumento` (
  `dni_m` VARCHAR(9) NOT NULL,
  `Nombre_i` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`dni_m`, `Nombre_i`),
  INDEX `nombre_i_idx` (`Nombre_i` ASC) VISIBLE,
  CONSTRAINT `dni_m`
    FOREIGN KEY (`dni_m`)
    REFERENCES `mydb`.`Musico` (`dni`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Nombre_i`
    FOREIGN KEY (`Nombre_i`)
    REFERENCES `mydb`.`Instrumento` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Asignan_Mus_Gru_Ins`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Asignan_Mus_Gru_Ins` (
  `dni_m` VARCHAR(9) NOT NULL,
  `Nombre_i` VARCHAR(45) NOT NULL,
  `Nombre_g` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`dni_m`, `Nombre_i`, `Nombre_g`),
  INDEX `nombre_i_idx` (`Nombre_i` ASC) VISIBLE,
  INDEX `nombre_g_idx` (`Nombre_g` ASC) VISIBLE,
  CONSTRAINT `dni_m`
    FOREIGN KEY (`dni_m`)
    REFERENCES `mydb`.`Musico` (`dni`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Nombre_i`
    FOREIGN KEY (`Nombre_i`)
    REFERENCES `mydb`.`Instrumento` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Nombre_g`
    FOREIGN KEY (`Nombre_g`)
    REFERENCES `mydb`.`Grupo` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Compone_Mus_Can`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Compone_Mus_Can` (
  `dni_m` VARCHAR(9) NOT NULL,
  `Nombre_c` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`dni_m`, `Nombre_c`),
  INDEX `nombre_c_idx` (`Nombre_c` ASC) VISIBLE,
  CONSTRAINT `dni_m`
    FOREIGN KEY (`dni_m`)
    REFERENCES `mydb`.`Musico` (`dni`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Nombre_c`
    FOREIGN KEY (`Nombre_c`)
    REFERENCES `mydb`.`Canciones` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Distribuido_Alb_Dis`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Distribuido_Alb_Dis` (
  `Nombre_a` VARCHAR(30) NOT NULL,
  `Codigo_d` INT NOT NULL,
  PRIMARY KEY (`Nombre_a`, `Codigo_d`),
  INDEX `codigo_d_idx` (`Codigo_d` ASC) VISIBLE,
  CONSTRAINT `nombre_a`
    FOREIGN KEY (`Nombre_a`)
    REFERENCES `mydb`.`Album` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `codigo_d`
    FOREIGN KEY (`Codigo_d`)
    REFERENCES `mydb`.`Discografica` (`Codigo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Publicar_Alb_Pro`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Publicar_Alb_Pro` (
  `Nombre_a` VARCHAR(30) NOT NULL,
  `Codigo_p` INT NOT NULL,
  PRIMARY KEY (`Nombre_a`, `Codigo_p`),
  INDEX `codigo_p_idx` (`Codigo_p` ASC) VISIBLE,
  CONSTRAINT `nombre_a`
    FOREIGN KEY (`Nombre_a`)
    REFERENCES `mydb`.`Album` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `codigo_p`
    FOREIGN KEY (`Codigo_p`)
    REFERENCES `mydb`.`Productora` (`Codigo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Interpreta_Gru_Alb`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Interpreta_Gru_Alb` (
  `Nombre_g` VARCHAR(20) NOT NULL,
  `Nombre_a` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Nombre_g`, `Nombre_a`),
  INDEX `Nombre_a_idx` (`Nombre_a` ASC) VISIBLE,
  CONSTRAINT `Nombre_g`
    FOREIGN KEY (`Nombre_g`)
    REFERENCES `mydb`.`Grupo` (`Nombre`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `Nombre_a`
    FOREIGN KEY (`Nombre_a`)
    REFERENCES `mydb`.`Album` (`Nombre`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Tiene_Can_Alb`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`Tiene_Can_Alb` (
  `Nombre_c` VARCHAR(20) NOT NULL,
  `Nombre_a` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`Nombre_c`, `Nombre_a`),
  INDEX `Nombre_a_idx` (`Nombre_a` ASC) VISIBLE,
  CONSTRAINT `Nombre_a`
    FOREIGN KEY (`Nombre_a`)
    REFERENCES `mydb`.`Album` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `Nombre_c`
    FOREIGN KEY (`Nombre_c`)
    REFERENCES `mydb`.`Canciones` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `mydb`.`Musico`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Musico` (`dni`, `Nombre`, `Nacionalidad`, `Fecha de nacimiento`) VALUES ('45454545p', 'James Hetfield', 'USA', '3/08/1963');
INSERT INTO `mydb`.`Musico` (`dni`, `Nombre`, `Nacionalidad`, `Fecha de nacimiento`) VALUES ('98989898k', 'Freddie Mercury', 'Reino Unido', '5/09/1946');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Grupo`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Grupo` (`Nombre`) VALUES ('AC/DC');
INSERT INTO `mydb`.`Grupo` (`Nombre`) VALUES ('Metallica');
INSERT INTO `mydb`.`Grupo` (`Nombre`) VALUES ('Queen');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Instrumento`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Instrumento` (`Nombre`) VALUES ('Guitarra');
INSERT INTO `mydb`.`Instrumento` (`Nombre`) VALUES ('Bateria');
INSERT INTO `mydb`.`Instrumento` (`Nombre`) VALUES ('Voz');
INSERT INTO `mydb`.`Instrumento` (`Nombre`) VALUES ('Bajo');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Canciones`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Canciones` (`Nombre`, `Duracion`, `Publicacion`, `Genero`) VALUES ('Bohemian Rhapsody', 5.55, '01/07/1975', 'Art Rock');
INSERT INTO `mydb`.`Canciones` (`Nombre`, `Duracion`, `Publicacion`, `Genero`) VALUES ('One', 7,24, '01/03/1988', 'Heavy Metal');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Discografica`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Discografica` (`Codigo`, `Nombre`) VALUES (55555555, 'Sony Music');
INSERT INTO `mydb`.`Discografica` (`Codigo`, `Nombre`) VALUES (77777777, 'EMI');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Productora`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Productora` (`Codigo`, `Nombre`) VALUES (11111111, 'Timbaland');
INSERT INTO `mydb`.`Productora` (`Codigo`, `Nombre`) VALUES (33333333, 'Max Martin');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Album`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Album` (`Nombre`, `Publicacion`, `Tipo`, `Genero`, `Cantidad de canciones`, `Formato`) VALUES ('Load', '4/06/1996', 'Albumes', 'Heavy Metal', 5, NULL);
INSERT INTO `mydb`.`Album` (`Nombre`, `Publicacion`, `Tipo`, `Genero`, `Cantidad de canciones`, `Formato`) VALUES ('Killer Queen', '11/10/1974', 'Sencillo', 'Pop Rock', 1, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Pertenece_Mus_Gru`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Pertenece_Mus_Gru` (`dni_m`, `Nombre_g`, `Comienzo`, `Fin`) VALUES ('45454545p', 'Queen', '01/08/1980', NULL);
INSERT INTO `mydb`.`Pertenece_Mus_Gru` (`dni_m`, `Nombre_g`, `Comienzo`, `Fin`) VALUES ('98989898k', 'Metallica', '01/05/1960', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Tocan_Musico_Instrumento`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Tocan_Musico_Instrumento` (`dni_m`, `Nombre_i`) VALUES ('45454545p', 'Bateria');
INSERT INTO `mydb`.`Tocan_Musico_Instrumento` (`dni_m`, `Nombre_i`) VALUES ('45454545p', 'Voz');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Asignan_Mus_Gru_Ins`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Asignan_Mus_Gru_Ins` (`dni_m`, `Nombre_i`, `Nombre_g`) VALUES ('98989898k', 'Guitarra', 'Queen');
INSERT INTO `mydb`.`Asignan_Mus_Gru_Ins` (`dni_m`, `Nombre_i`, `Nombre_g`) VALUES ('98989898k', 'Bajo', 'Queen');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Compone_Mus_Can`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Compone_Mus_Can` (`dni_m`, `Nombre_c`) VALUES ('45454545p', 'One');
INSERT INTO `mydb`.`Compone_Mus_Can` (`dni_m`, `Nombre_c`) VALUES ('98989898k', 'Bohemian Rhapsody');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Distribuido_Alb_Dis`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Distribuido_Alb_Dis` (`Nombre_a`, `Codigo_d`) VALUES ('Load', 55555555);
INSERT INTO `mydb`.`Distribuido_Alb_Dis` (`Nombre_a`, `Codigo_d`) VALUES ('Load', 77777777);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Publicar_Alb_Pro`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Publicar_Alb_Pro` (`Nombre_a`, `Codigo_p`) VALUES ('Killer Queen', 11111111);
INSERT INTO `mydb`.`Publicar_Alb_Pro` (`Nombre_a`, `Codigo_p`) VALUES ('Killer Queen', 33333333);

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Interpreta_Gru_Alb`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Interpreta_Gru_Alb` (`Nombre_g`, `Nombre_a`) VALUES ('Metallica', 'Load');
INSERT INTO `mydb`.`Interpreta_Gru_Alb` (`Nombre_g`, `Nombre_a`) VALUES ('Queen', 'Killer Queen');

COMMIT;


-- -----------------------------------------------------
-- Data for table `mydb`.`Tiene_Can_Alb`
-- -----------------------------------------------------
START TRANSACTION;
USE `mydb`;
INSERT INTO `mydb`.`Tiene_Can_Alb` (`Nombre_c`, `Nombre_a`) VALUES ('One', 'Load');

COMMIT;

